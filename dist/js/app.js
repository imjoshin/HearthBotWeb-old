$().ready(function(){$(".card-image").on("click",function(){var a=$.parseJSON($(this).parent().attr("data-fields"));$.each(a,function(a,t){a=a.replace("[","\\[").replace("]","\\]"),"checkbox"==$("[id = "+a+"]").attr("type")?$("[id = "+a+"]").prop("checked","1"==t):$("[id = "+a+"]").val(t)}),$(".card-container").show()}),$(".btn-add-card").on("click",function(){$("#card").trigger("reset"),$("#card #id").val("-1"),$(".card-container").show()}),$(".modal-container-close").on("click",function(){$(".modal-container").hide()}),$(".btn-save").on("click",function(){$.ajax({type:"POST",dataType:"json",url:"php/ajax.php",data:{call:"save_card",form:$("#card").serialize()},success:function(a){if(a.success){var t=$.parseJSON(a.output);if(a.new)location.reload();else var c=$(".card[data-id="+t.id+"]");c.attr("data-fields",a.output),c.find(".card-image").css("background-image","url("+t.img+")"),c.find(".card-title").text(t.name),$(".modal-container").hide()}else alert(a.output)}})}),$(".card-delete").on("click",function(a){a.stopPropagation();var t=$(this).parents(".card");$.ajax({type:"POST",dataType:"json",url:"php/ajax.php",data:{call:"delete_card",card_id:t.attr("data-id")},success:function(a){a.success?t.remove():alert(a.output)}})})}),$().ready(function(){$(".login-modal-form input").on("keypress",function(a){13==a.which&&$(this).siblings(".btn").click()}),$(".btn-login").on("click",function(){$.ajax({type:"POST",dataType:"json",url:"php/ajax.php",data:{call:"login",form:$("#login").serialize()},success:function(a){a.success?location.reload():alert(a.output)}})}),$(".btn-logout").on("click",function(){$.ajax({type:"POST",dataType:"json",url:"php/ajax.php",data:{call:"logout"},success:function(a){a.success?location.reload():(alert("Something went wrong!"),location.reload())}})})});